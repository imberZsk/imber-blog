## 基于 Tailwind 的响应式布局

- [Tailwind 响应式设计](https://tailwindcss.com/docs/responsive-design)
- [Image Optimization](https://nextjs.org/docs/app/getting-started/images)
- [Image](https://nextjs.org/docs/app/api-reference/components/image)

### 响应式布局

如上篇文章所说的，响应式布局和自适应布局的区别，这里不再赘述

响应式布局：

- 根据屏幕大小自动调整布局
- 使用媒体查询，单位基本只需要使用 px
- 使用flex,grid,百分比布局
- 需要特别注意的是 tailwind 中需要移动端优先

<video src="/posts/responsive/media2.mov" controls />

### 移动端优先

无前缀的类名（如 uppercase）对所有屏幕大小都有效，而带前缀的类名（如 md：uppercase）仅在指定的断点及以上处生效。

开发的时候应该先做移动端，然后做 PC 端，因为 PC 端会覆盖移动端样式

### Tailwind 常用响应式布局的类名

sm、md、lg、xl、2xl 是 Tailwind 的响应式断点，分别对应 640px、768px、1024px、1280px、1536px

min-[320px]:text-center 使用断点任意值，表示在 320px 及以上的屏幕上，text-center 类名生效

container 类名表示内容区域被限制在容器内，不会超出容器边界，
它表示容器，跟 padding 一起用断点的时候不会很生硬，外层也加一层元素会控制样式更加灵活

```css
.container {
  width: 100%;
  @media (width >= 40rem /* 640px */) {
    max-width: 40rem /* 640px */;
  }
  @media (width >= 48rem /* 768px */) {
    max-width: 48rem /* 768px */;
  }
  @media (width >= 64rem /* 1024px */) {
    max-width: 64rem /* 1024px */;
  }
  @media (width >= 80rem /* 1280px */) {
    max-width: 80rem /* 1280px */;
  }
  @media (width >= 96rem /* 1536px */) {
    max-width: 96rem /* 1536px */;
  }
}
```

### 图片的响应式(Nextjs)

Nextjs 中图片有三种存放的方式（Nextjs官网谈到两种）

1、 第一种是放到 public 文件夹，使用的时候 `src='/demo.png'`

```tsx
<Image src="/avatar.jpg" alt="test" width={100} height={100} />
```

![image](/posts/responsive/image3.png)

- 必须要给 width 和 height，width 和 height 和图片真实宽高无关，所以只有比例关系有用，但是还是每个图片外都给一个 div 设置宽高，防止意外情况，比如 gsap 动画计算就一定需要宽高，(如果父级不加宽高，图片的显示大小就是设置的 width 和 height，但不要这样做)
- 图片会自动转 webp 格式
  ![image](/posts/responsive/image4.png)
- 自动设置 loading="lazy"
- 如果图片在首屏可见，nextjs 会提示添加 priority 属性，和不加的区别是没有 loading="lazy" 属性
  ![image](/posts/responsive/image2.png)
  ![image](/posts/responsive/image1.png)
- 图片的 srcset 属性，可以设置图片的响应式，在电脑上清晰度比较低的显示器才是 1，手机屏幕往往比较高，都会大于 2 ,这里的 w=256 跟我设置的 width={100} height={100} 有关，可以理解为二倍图，跟 [devicesizes](https://nextjs.org/docs/app/api-reference/components/image#devicesizes) 配置有关；w=256 表示图片的宽度是 256px，q=75 表示图片的质量是 75%，跟 [quality](https://nextjs.org/docs/app/api-reference/components/image#qualities) 配置有关

```text
srcset="/_next/image?url=%2Favatar.jpg&w=128&q=75 1x,
        /_next/image?url=%2Favatar.jpg&w=256&q=75 2x"
```

![image](/posts/responsive/image5.png)

2、 第二种是放到 app 文件夹，通过模块导入使用，这种方式和第一种差不多，只是不需要给 width 和 height，nextjs 会自动计算

```tsx
import DemoImage from './images/avatar.jpg'

const Test = () => {
  return <Image src={DemoImage} alt="test" />
}

export default Test
```

![image](/posts/responsive/image6.png)

那什么时候用第一种，什么时候用第二种呢？

- 如果图片是本地图片，并且需要响应式，使用第一种

3、 第三种是远程链接，使用的时候 `src='https://example.com/demo.png'`，为了安全，需要 [remotePatterns](https://nextjs.org/docs/app/api-reference/components/image#remotepatterns) 配置

### 理想的响应式布局

### 自适应 + 响应式布局

```

```
